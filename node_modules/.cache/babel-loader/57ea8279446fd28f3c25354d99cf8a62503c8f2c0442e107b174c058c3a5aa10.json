{"ast":null,"code":"import React,{useContext,useState}from\"react\";import{DataContext}from\"../../context/context.js\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import{FaStar}from\"react-icons/fa\";import*as Yup from\"yup\";import{Alert,Button,Spinner}from\"react-bootstrap\";import{Helmet}from\"react-helmet\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReviewsofUsers(){const{postReview,user,loading}=useContext(DataContext);const[successMessage,setSuccessMessage]=useState(null);const[errorMessage,setErrorMessage]=useState(null);// Form validation schema using Yup\nconst validationSchema=Yup.object().shape({rating:Yup.number().min(1,\"Rating is required\").max(5,\"Maximum rating is 5\").required(\"Please provide a rating\"),comment:Yup.string().required(\"Please provide a comment\"),reviewFor:Yup.string().required(\"Please select a review category\")});// Handling form submission\nconst handleSubmit=async(values,_ref)=>{let{resetForm}=_ref;if(!user){setErrorMessage(\"User not authenticated. Please log in.\");return;}const reviewData={user:user._id,// Taking user ID from the decoded token stored in the context\nrating:values.rating,comment:values.comment,reviewFor:values.reviewFor};const response=await postReview(reviewData);if(response){setSuccessMessage(\"Review posted successfully!\");resetForm();// Reset form after submission\n}else{setErrorMessage(\"Error posting review. Please try again.\");}};console.log(\"User \",user);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Submit Your Review\"}),/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Reviews\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Explore KSA Reviews\"})]}),successMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:successMessage}),errorMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:errorMessage}),/*#__PURE__*/_jsx(Formik,{initialValues:{rating:0,comment:\"\",reviewFor:\"\"},validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref2=>{let{values,setFieldValue}=_ref2;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rating\",children:\"Rating\"}),/*#__PURE__*/_jsx(\"div\",{children:[1,2,3,4,5].map(value=>/*#__PURE__*/_jsx(FaStar,{className:`star fs-3 ${value<=values.rating?\"text-warning\":\"text-muted\"}`,onClick:()=>setFieldValue(\"rating\",value),style:{cursor:\"pointer\"}},value))}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"rating\",component:\"div\",className:\"text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",children:\"Comment\"}),/*#__PURE__*/_jsx(Field,{as:\"textarea\",name:\"comment\",className:\"form-control\",placeholder:\"Leave your comment here...\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"comment\",component:\"div\",className:\"text-danger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"reviewFor\",children:\"Category\"}),/*#__PURE__*/_jsxs(Field,{as:\"select\",name:\"reviewFor\",className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Destination\",children:\"Destination\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accommodation\",children:\"Accommodation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Transportation\",children:\"Transportation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Itineraries\",children:\"Itineraries\"})]}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"reviewFor\",component:\"div\",className:\"text-danger\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\"}):\"Submit Review\"})]});}})]});}","map":{"version":3,"names":["React","useContext","useState","DataContext","Formik","Form","Field","ErrorMessage","FaStar","Yup","Alert","Button","Spinner","Helmet","jsx","_jsx","jsxs","_jsxs","ReviewsofUsers","postReview","user","loading","successMessage","setSuccessMessage","errorMessage","setErrorMessage","validationSchema","object","shape","rating","number","min","max","required","comment","string","reviewFor","handleSubmit","values","_ref","resetForm","reviewData","_id","response","console","log","className","children","name","content","variant","initialValues","onSubmit","_ref2","setFieldValue","htmlFor","map","value","onClick","style","cursor","component","as","placeholder","type","disabled","animation","size"],"sources":["/home/mubeen/Downloads/Node-Frontend/src/components/Reviews-of-Users/Reviews-of-Users.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { DataContext } from \"../../context/context.js\";\r\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\r\nimport { FaStar } from \"react-icons/fa\";\r\nimport * as Yup from \"yup\";\r\nimport { Alert, Button, Spinner } from \"react-bootstrap\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport default function ReviewsofUsers() {\r\n  const { postReview, user, loading } = useContext(DataContext);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  // Form validation schema using Yup\r\n  const validationSchema = Yup.object().shape({\r\n    rating: Yup.number()\r\n      .min(1, \"Rating is required\")\r\n      .max(5, \"Maximum rating is 5\")\r\n      .required(\"Please provide a rating\"),\r\n    comment: Yup.string().required(\"Please provide a comment\"),\r\n    reviewFor: Yup.string().required(\"Please select a review category\"),\r\n  });\r\n\r\n  // Handling form submission\r\n  const handleSubmit = async (values, { resetForm }) => {\r\n    if (!user) {\r\n      setErrorMessage(\"User not authenticated. Please log in.\");\r\n      return;\r\n    }\r\n    const reviewData = {\r\n      user: user._id, // Taking user ID from the decoded token stored in the context\r\n      rating: values.rating,\r\n      comment: values.comment,\r\n      reviewFor: values.reviewFor,\r\n    };\r\n\r\n    const response = await postReview(reviewData);\r\n    if (response) {\r\n      setSuccessMessage(\"Review posted successfully!\");\r\n      resetForm(); // Reset form after submission\r\n    } else {\r\n      setErrorMessage(\"Error posting review. Please try again.\");\r\n    }\r\n  };\r\n  console.log(\"User \", user);\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>Submit Your Review</h2>\r\n      <Helmet>\r\n        <title>Reviews</title>\r\n        <meta name=\"description\" content=\"Explore KSA Reviews\" />\r\n      </Helmet>\r\n      {/* Show success or error messages */}\r\n      {successMessage && <Alert variant=\"success\">{successMessage}</Alert>}\r\n      {errorMessage && <Alert variant=\"danger\">{errorMessage}</Alert>}\r\n\r\n      {/* Review Form using Formik */}\r\n      <Formik\r\n        initialValues={{\r\n          rating: 0,\r\n          comment: \"\",\r\n          reviewFor: \"\",\r\n        }}\r\n        validationSchema={validationSchema}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        {({ values, setFieldValue }) => (\r\n          <Form>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"rating\">Rating</label>\r\n              <div>\r\n                {[1, 2, 3, 4, 5].map((value) => (\r\n                  <FaStar\r\n                    key={value}\r\n                    className={`star fs-3 ${value <= values.rating ? \"text-warning\" : \"text-muted\"}`}\r\n                    onClick={() => setFieldValue(\"rating\", value)}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  />\r\n                ))}\r\n              </div>\r\n              <ErrorMessage name=\"rating\" component=\"div\" className=\"text-danger\" />\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"comment\">Comment</label>\r\n              <Field as=\"textarea\" name=\"comment\" className=\"form-control\" placeholder=\"Leave your comment here...\" />\r\n              <ErrorMessage name=\"comment\" component=\"div\" className=\"text-danger\" />\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"reviewFor\">Category</label>\r\n              <Field as=\"select\" name=\"reviewFor\" className=\"form-control\">\r\n                <option value=\"\">Select a category</option>\r\n                <option value=\"Destination\">Destination</option>\r\n                <option value=\"Accommodation\">Accommodation</option>\r\n                <option value=\"Transportation\">Transportation</option>\r\n                <option value=\"Itineraries\">Itineraries</option>\r\n              </Field>\r\n              <ErrorMessage name=\"reviewFor\" component=\"div\" className=\"text-danger\" />\r\n            </div>\r\n\r\n            <Button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\r\n              {loading ? <Spinner animation=\"border\" size=\"sm\" /> : \"Submit Review\"}\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}